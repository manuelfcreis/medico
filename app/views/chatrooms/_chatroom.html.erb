<% messages = @chatroom.messages %>
<%= action_cable_meta_tag %>

<div id="chatroom">
  <div class="body">
    <% messages.each do |m| %>
      <%= render partial: m, locals: { message: m } %>
    <% end %>
  </div>
  <div class="input">
    <%= form_for(@message, url: request.fullpath, html: { method: :post, remote: true}, class: 'form-group') do %>
      <%= text_field_tag(:content, "", placeholder: "Enter your message", class: 'form-control', id: 'content') %>
      <%= hidden_field_tag 'receiver_id', params[:id] %>
      <%= hidden_field_tag :authenticity_token, form_authenticity_token -%>
      <%= button_tag(class: 'send btn btn-white') do %>
        <%= icon('paper-plane-o', id: 'send')  %>
      <% end %>
    <% end %>
  </div>
</div>

<% content_for(:js_content) do %>
  <%= javascript_include_tag 'chatroom' %>
<% end %>
